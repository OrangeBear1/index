<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="UTF-8">
<title>ç‹èƒ½å‰å°æœ‹å‹ç”Ÿæ—¥å¿«ä¹</title>
<style>
body {
    margin: 0;
    overflow: hidden;
    background: linear-gradient(180deg, #ffe5ef, #ffd7ee);
    font-family: "å¾®è½¯é›…é»‘";
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    height: 100vh;
}

/* ---------------- CSS èŠ±æœµ ---------------- */
#flower-box {
    position: relative;
    width: 240px;
    height: 240px;
    animation: flowerZoom 2.5s ease-out forwards;
}

.flower-petal {
    position: absolute;
    width: 60px;
    height: 20px;
    background: #ff6fa8;
    border-radius: 50% 50% 0 0;
    top: 50%;
    left: 50%;
    transform-origin: bottom center;
    animation: petalFly 2.5s forwards;
}

.flower-center {
    position: absolute;
    width: 40px;
    height: 40px;
    background: #fff3f8;
    border-radius: 50%;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    animation: centerScale 2.5s ease-out forwards;
}

@keyframes centerScale {
    0% { transform: translate(-50%, -50%) scale(1); }
    50% { transform: translate(-50%, -50%) scale(1.3); }
    100% { transform: translate(-50%, -50%) scale(0); }
}

@keyframes petalFly {
    0% { transform: rotate(var(--deg)) translate(-50%, -100%) scale(1); opacity:1; }
    50% { transform: rotate(var(--deg)) translate(-50%, -150%) scale(1.2); opacity:0.8; }
    100% { transform: rotate(var(--deg)) translate(calc(-50% + var(--dx)), calc(-200% + var(--dy))) scale(0); opacity:0; }
}

@keyframes flowerZoom {
    0% { opacity:1; }
    100% { opacity:0; }
}

/* ---------------- 3D ä¿¡å° ---------------- */
#envelope {
    display: none;
    width: 300px;
    height: 200px;
    background: #fff;
    border-radius: 12px;
    position: relative;
    box-shadow: 0 8px 25px rgba(0,0,0,0.25);
    transform-style: preserve-3d;
    perspective: 800px;
    cursor: pointer;
    animation: fadeIn 1.2s ease-out forwards;
}

#envelope .flap {
    position: absolute;
    width: 100%;
    height: 140px;
    background: #ffb5d3;
    clip-path: polygon(0 0, 100% 0, 50% 100%);
    top: -138px;
    transform-origin: top;
    transition: transform 1s cubic-bezier(0.68,-0.55,0.265,1.55);
    box-shadow: 0 6px 15px rgba(0,0,0,0.15);
}

#envelope.open .flap {
    transform: rotateX(180deg);
}

/* å…‰æ™•æ•ˆæœ */
#glow {
    position: absolute;
    width: 320px;
    height: 220px;
    border-radius: 20px;
    background: radial-gradient(circle, rgba(255,200,220,0.9), transparent 70%);
    filter: blur(20px);
    opacity: 0;
    transition: opacity 1s ease-out;
    z-index: -1;
}

#envelope.open ~ #glow {
    opacity: 1;
}

/* ---------------- ä¿¡å†…å¡ç‰‡ ---------------- */
#letter {
    display: none;
    margin-top: 25px;
    width: 340px;
    padding: 22px;
    background: white;
    border-radius: 15px;
    box-shadow: 0 8px 25px rgba(0,0,0,0.2);
    font-size: 20px;
    text-align: center;
    line-height: 32px;
    animation: cardPop 0.8s ease-out;
    white-space: pre-wrap;
}

@keyframes cardPop {
    from { transform: scale(0.6) translateY(40px); opacity: 0; }
    to   { transform: scale(1) translateY(0); opacity: 1; }
}

@keyframes fadeIn {
    from { opacity: 0; transform: translateY(60px); }
    to   { opacity: 1; transform: translateY(0); }
}

/* å¿ƒå¿ƒä¸Šæµ® */
.heart {
    position: fixed;
    font-size: 22px;
    color: #ff4f85;
    animation: heartFloat 1.4s ease-out forwards;
}

@keyframes heartFloat {
    from { transform: translateY(0) rotate(0deg); opacity: 1; }
    to   { transform: translateY(-80px) rotate(360deg); opacity: 0; }
}

/* èƒŒæ™¯canvas */
#canvas, #stars, #ribbons {
    position: fixed;
    left:0;
    top:0;
    z-index:-1;
}

/* æç¤ºæ–‡å­—åŠ¨ç”» */
#tip {
    position: absolute;
    top: 55%;
    font-size: 22px;
    color: #ff4f85;
    font-weight: bold;
    text-shadow: 0 0 8px #fff3f8;
    animation: tipBounce 1s infinite, tipShake 0.8s infinite alternate;
    cursor: default;
}

@keyframes tipBounce {
    0%, 100% { transform: translateY(0); opacity: 1; }
    50% { transform: translateY(-10px); opacity: 0.7; }
}

@keyframes tipShake {
    0% { transform: translateX(0); }
    25% { transform: translateX(-5px); }
    50% { transform: translateX(5px); }
    75% { transform: translateX(-3px); }
    100% { transform: translateX(3px); }
}
</style>
</head>
<body>

<!-- CSS èŠ±æœµ -->
<div id="flower-box">
    <div class="flower-petal" style="--deg:0deg; --dx:50px; --dy:-80px;"></div>
    <div class="flower-petal" style="--deg:60deg; --dx:-60px; --dy:-50px;"></div>
    <div class="flower-petal" style="--deg:120deg; --dx:40px; --dy:-90px;"></div>
    <div class="flower-petal" style="--deg:180deg; --dx:-30px; --dy:-100px;"></div>
    <div class="flower-petal" style="--deg:240deg; --dx:60px; --dy:-70px;"></div>
    <div class="flower-petal" style="--deg:300deg; --dx:-50px; --dy:-80px;"></div>
    <div class="flower-center"></div>
</div>

<!-- ä¿¡å° -->
<div id="envelope">
    <div class="flap"></div>
</div>

<div id="glow"></div>

<div id="letter"></div>

<!-- ä¿¡å°æç¤º -->
<div id="tip">ğŸ‘‡ ç‚¹å‡»ç¿»ç›–æŸ¥çœ‹ç¥ç¦ ğŸ‘‡</div>

<canvas id="canvas"></canvas>
<canvas id="stars"></canvas>
<canvas id="ribbons"></canvas>

<audio id="music" src="https://www.bensound.com/bensound-music/bensound-tenderness.mp3" autoplay loop></audio>

<script>
/* ---------------- èŠ±æœµ â†’ ä¿¡å° ---------------- */
setTimeout(()=>{
    document.getElementById("flower-box").style.display="none";
    document.getElementById("envelope").style.display="block";
},2500);

/* ---------------- ç‚¹å‡»ä»»æ„ä½ç½®æ‰“å¼€ä¿¡å° â†’ å¡ç‰‡ ---------------- */
const envelope = document.getElementById("envelope");
const letter = document.getElementById("letter");
const tip = document.getElementById("tip");

let opened = false; // é˜²æ­¢é‡å¤è§¦å‘
document.addEventListener("click", (e)=>{
    // é¦–æ¬¡ç‚¹å‡»æ‰“å¼€ä¿¡å°
    if(!opened){
        opened = true;
        envelope.classList.add("open");
        tip.style.display = "none";
        letter.style.display = "block";
        const text = `ğŸ‰ äº²çˆ±çš„ç‹èƒ½å‰å°æœ‹å‹ï¼Œç”Ÿæ—¥å¿«ä¹ï¼
æ„¿ä½ çš„æ¯ä¸€å¤©éƒ½è¢«é˜³å…‰å’Œç¬‘å®¹ç¯ç»•ï¼Œæ¸©æš–è€Œç¾å¥½ã€‚
æ„¿æ‰€æœ‰çš„æƒŠå–œä¸ç”œèœœï¼Œéƒ½æ‚„æ‚„æ¥åˆ°ä½ çš„èº«è¾¹ï¼Œ
æ¯ä¸€ä¸ªå¿ƒæ„¿éƒ½å¦‚æ˜Ÿå…‰èˆ¬é—ªè€€ âœ¨

â€”â€” é€ç»™ä½ çš„ MR é™ˆ`;

        let i = 0;
        function typeWriter(){
            if(i < text.length){
                letter.textContent += text.charAt(i);
                i++;
                setTimeout(typeWriter, 40);
            }
        }
        typeWriter();
        return; // è¿™æ¬¡ç‚¹å‡»ç”¨äºæ‰“å¼€ä¿¡å°ï¼Œä¸ç”Ÿæˆå¿ƒå¿ƒ
    }

    // å…¶ä»–ç‚¹å‡»ç”Ÿæˆå¿ƒå¿ƒæ•ˆæœ
    const heart = document.createElement("div");
    heart.className = "heart";
    heart.textContent = "â¤";
    heart.style.left = e.pageX + "px";
    heart.style.top = e.pageY + "px";
    heart.style.transform = `rotate(${Math.random()*360}deg) scale(${0.8 + Math.random()*0.6})`;
    heart.style.color = `hsl(${Math.random()*360},80%,70%)`;
    document.body.appendChild(heart);
    setTimeout(()=>heart.remove(),1400);
});


/* ---------------- èƒŒæ™¯è½èŠ± ---------------- */
const cvs=document.getElementById("canvas");
const ctx=cvs.getContext("2d");
cvs.width=window.innerWidth;
cvs.height=window.innerHeight;
const petals=[];
function Petal(){ this.x=Math.random()*cvs.width; this.y=Math.random()*cvs.height; this.size=Math.random()*6+2; this.speed=Math.random()*1+0.5; this.angle=0; this.color=`rgba(${255},${155+Math.random()*50},${180+Math.random()*50},0.85)`;}
for(let i=0;i<70;i++) petals.push(new Petal());
function fall(){
    ctx.clearRect(0,0,cvs.width,cvs.height);
    ctx.beginPath();
    petals.forEach(p=>{
        p.y+=p.speed;
        p.angle+=0.02;
        p.x+=Math.sin(p.angle)*0.4;
        if(p.y>cvs.height){ p.y=-10; p.x=Math.random()*cvs.width;}
        ctx.moveTo(p.x,p.y);
        ctx.arc(p.x,p.y,p.size,0,2*Math.PI);
        ctx.fillStyle=p.color;
        ctx.fill();
    });
    requestAnimationFrame(fall);
}
fall();

/* ---------------- æ˜Ÿæ˜Ÿ ---------------- */
const starsC=document.getElementById("stars");
const sctx=starsC.getContext("2d");
starsC.width=window.innerWidth;
starsC.height=window.innerHeight;
const stars=[];
for(let i=0;i<100;i++){ stars.push({x:Math.random()*starsC.width,y:Math.random()*starsC.height,r:Math.random()*2+1,speed:Math.random()*0.02});}
function drawStars(){
    sctx.clearRect(0,0,starsC.width,starsC.height);
    stars.forEach(st=>{
        st.y-=st.speed;
        if(st.y<0) st.y=starsC.height;
        sctx.beginPath();
        sctx.arc(st.x,st.y,st.r,0,2*Math.PI);
        sctx.fillStyle="#fff";
        sctx.fill();
    });
    requestAnimationFrame(drawStars);
}
drawStars();

/* ---------------- å½©å¸¦ ---------------- */
const ribbonsC=document.getElementById("ribbons");
const rctx=ribbonsC.getContext("2d");
ribbonsC.width=window.innerWidth;
ribbonsC.height=window.innerHeight;
const ribbons=[];
for(let i=0;i<30;i++){
    ribbons.push({x:Math.random()*ribbonsC.width,y:Math.random()*ribbonsC.height,length:20+Math.random()*30,angle:Math.random()*360,color:`hsl(${Math.random()*360},80%,60%)`,speed:1+Math.random()*2});
}
function drawRibbons(){
    rctx.clearRect(0,0,ribbonsC.width,ribbonsC.height);
    ribbons.forEach(r=>{
        r.y+=r.speed;
        r.x+=Math.sin(r.angle)*0.5;
        r.angle+=0.05;
        if(r.y>ribbonsC.height){ r.y=-10; r.x=Math.random()*ribbonsC.width;}
        rctx.strokeStyle=r.color;
        rctx.beginPath();
        rctx.moveTo(r.x,r.y);
        rctx.lineTo(r.x+Math.cos(r.angle)*r.length,r.y+Math.sin(r.angle)*r.length);
        rctx.stroke();
    });
    requestAnimationFrame(drawRibbons);
}
drawRibbons();
</script>
</body>
</html>
